<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Modern Air Hockey</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            color: white;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            z-index: 10;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 5px;
            background: linear-gradient(to right, #ff8a00, #da1b60);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .game-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            aspect-ratio: 16/9;
            perspective: 1000px;
        }

        .game-table {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(160deg, #1e5799, #207cca, #1e5799);
            border-radius: 12px;
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.7),
                inset 0 0 60px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            transform-style: preserve-3d;
            transform: rotateX(10deg);
        }

        /* Table surface details */
        .table-surface {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #2c3e50, #1a2530);
            border-radius: 10px;
        }

        .center-line {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, 
                transparent 0%, 
                rgba(255, 255, 255, 0.8) 10%, 
                rgba(255, 255, 255, 0.8) 90%, 
                transparent 100%);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
            border: 4px solid rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .goal {
            position: absolute;
            width: 200px;
            height: 40px;
            background: linear-gradient(to bottom, #333, #111);
            border: 4px solid #da1b60;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.8);
            z-index: 2;
        }

        .goal.player1 {
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .goal.player2 {
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .goal-inner {
            position: absolute;
            top: 4px;
            left: 4px;
            width: calc(100% - 8px);
            height: calc(100% - 8px);
            background: linear-gradient(to bottom, #222, #000);
            border-radius: 6px;
        }

        /* Game elements */
        .puck {
            position: absolute;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle at 30% 30%, #ff8a00, #da1b60);
            border-radius: 50%;
            box-shadow: 
                0 0 15px rgba(218, 27, 96, 0.8),
                inset 0 5px 10px rgba(255, 255, 255, 0.4);
            z-index: 5;
            transition: transform 0.1s ease-out;
        }

        .paddle {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            z-index: 4;
            box-shadow: 
                0 5px 15px rgba(0, 0, 0, 0.5),
                inset 0 0 20px rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: rgba(255, 255, 255, 0.7);
            transition: transform 0.1s ease-out;
        }

        .paddle.player1 {
            background: radial-gradient(circle at 30% 30%, #00c3ff, #0077ff);
            border: 4px solid #00aaff;
        }

        .paddle.player2 {
            background: radial-gradient(circle at 30% 30%, #ff8a00, #ff2a00);
            border: 4px solid #ff5500;
        }

        /* Score display */
        .score-container {
            display: flex;
            justify-content: space-around;
            width: 100%;
            max-width: 800px;
            margin-top: 25px;
        }

        .player-score {
            text-align: center;
            background: rgba(0, 0, 0, 0.4);
            padding: 15px 30px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .player-label {
            font-size: 1.3rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .score {
            font-size: 3rem;
            font-weight: 700;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 20px;
            margin-top: 25px;
        }

        button {
            background: linear-gradient(to right, #00c3ff, #0077ff);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            font-weight: 600;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        button:active {
            transform: translateY(1px);
        }

        button.reset {
            background: linear-gradient(to right, #ff8a00, #ff2a00);
        }

        /* Instructions */
        .instructions {
            margin-top: 25px;
            background: rgba(0, 0, 0, 0.4);
            padding: 15px 25px;
            border-radius: 12px;
            max-width: 800px;
            text-align: center;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .instructions p {
            margin: 10px 0;
        }

        .highlight {
            color: #ff8a00;
            font-weight: 600;
        }

        /* Mobile instructions */
        .mobile-instructions {
            display: none;
            margin-top: 15px;
            font-size: 1rem;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .paddle {
                width: 70px;
                height: 70px;
                font-size: 1.5rem;
            }
            
            .score {
                font-size: 2.5rem;
            }
            
            .mobile-instructions {
                display: block;
            }
            
            .controls {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        /* Particles for effects */
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            pointer-events: none;
            z-index: 3;
        }

        /* Glow effects */
        .glow {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle at center, rgba(255, 138, 0, 0.4), transparent 70%);
            z-index: 1;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>3D AIR HOCKEY</h1>
        <div class="subtitle">Experience the thrill of modern air hockey in 3D</div>
    </div>
    
    <div class="game-container">
        <div class="game-table">
            <div class="glow"></div>
            <div class="table-surface">
                <div class="center-line"></div>
                <div class="center-circle"></div>
                
                <div class="goal player1">
                    <div class="goal-inner"></div>
                </div>
                
                <div class="goal player2">
                    <div class="goal-inner"></div>
                </div>
                
                <div class="puck" id="puck"></div>
                <div class="paddle player1" id="player1">P1</div>
                <div class="paddle player2" id="player2">P2</div>
            </div>
        </div>
    </div>
    
    <div class="score-container">
        <div class="player-score">
            <div class="player-label">PLAYER 1</div>
            <div class="score" id="score1">0</div>
        </div>
        
        <div class="player-score">
            <div class="player-label">PLAYER 2</div>
            <div class="score" id="score2">0</div>
        </div>
    </div>
    
    <div class="controls">
        <button id="startBtn"><i class="fas fa-play"></i> START GAME</button>
        <button class="reset" id="resetBtn"><i class="fas fa-redo"></i> RESET SCORE</button>
    </div>
    
    <div class="instructions">
        <p><span class="highlight">Desktop:</span> Move your mouse to control Player 1 paddle</p>
        <p><span class="highlight">Mobile:</span> Touch and drag to control Player 1 paddle</p>
        <p>First to <span class="highlight">7 points</span> wins!</p>
    </div>
    
    <div class="mobile-instructions">
        TIP: Play in landscape mode for the best experience
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Game elements
            const puck = document.getElementById('puck');
            const player1 = document.getElementById('player1');
            const player2 = document.getElementById('player2');
            const score1 = document.getElementById('score1');
            const score2 = document.getElementById('score2');
            const startBtn = document.getElementById('startBtn');
            const resetBtn = document.getElementById('resetBtn');
            const gameTable = document.querySelector('.game-table');
            
            // Game state
            let gameActive = false;
            let player1Score = 0;
            let player2Score = 0;
            let winner = null;
            
            // Puck physics
            let puckX = 400;
            let puckY = 225;
            let puckSpeedX = 0;
            let puckSpeedY = 0;
            const puckRadius = 20;
            
            // Paddle positions
            const paddleRadius = 40;
            let player1X = 400;
            let player1Y = 400;
            let player2X = 400;
            let player2Y = 50;
            
            // Game dimensions
            const tableWidth = gameTable.clientWidth;
            const tableHeight = gameTable.clientHeight;
            
            // Initialize positions
            resetPositions();
            
            // Event listeners
            startBtn.addEventListener('click', startGame);
            resetBtn.addEventListener('click', resetGame);
            
            // Mouse/touch controls for player 1
            gameTable.addEventListener('mousemove', (e) => {
                if (!gameActive) return;
                
                const rect = gameTable.getBoundingClientRect();
                player1X = e.clientX - rect.left;
                player1Y = e.clientY - rect.top;
                
                // Boundary check
                player1X = Math.max(paddleRadius, Math.min(tableWidth - paddleRadius, player1X));
                player1Y = Math.max(tableHeight/2 + paddleRadius, Math.min(tableHeight - paddleRadius, player1Y));
            });
            
            // Touch controls for mobile
            gameTable.addEventListener('touchmove', (e) => {
                if (!gameActive) return;
                e.preventDefault();
                
                const touch = e.touches[0];
                const rect = gameTable.getBoundingClientRect();
                player1X = touch.clientX - rect.left;
                player1Y = touch.clientY - rect.top;
                
                // Boundary check
                player1X = Math.max(paddleRadius, Math.min(tableWidth - paddleRadius, player1X));
                player1Y = Math.max(tableHeight/2 + paddleRadius, Math.min(tableHeight - paddleRadius, player1Y));
            });
            
            // Start the game
            function startGame() {
                if (gameActive) return;
                
                gameActive = true;
                startBtn.textContent = 'GAME ON!';
                startBtn.style.background = 'linear-gradient(to right, #00ff88, #00cc66)';
                
                resetPositions();
                
                // Initial puck velocity
                puckSpeedX = (Math.random() > 0.5 ? 1 : -1) * (3 + Math.random() * 2);
                puckSpeedY = (Math.random() * 4) - 2;
                
                gameLoop();
            }
            
            // Reset score and positions
            function resetGame() {
                player1Score = 0;
                player2Score = 0;
                score1.textContent = '0';
                score2.textContent = '0';
                resetPositions();
            }
            
            // Reset puck and paddles to starting positions
            function resetPositions() {
                puckX = tableWidth / 2;
                puckY = tableHeight / 2;
                player1X = tableWidth / 2;
                player1Y = tableHeight - 100;
                player2X = tableWidth / 2;
                player2Y = 100;
                
                puckSpeedX = 0;
                puckSpeedY = 0;
                
                updatePositions();
            }
            
            // Main game loop
            function gameLoop() {
                if (!gameActive) return;
                
                // Move puck
                puckX += puckSpeedX;
                puckY += puckSpeedY;
                
                // AI for player 2
                moveAI();
                
                // Wall collisions
                if (puckX < puckRadius || puckX > tableWidth - puckRadius) {
                    puckSpeedX = -puckSpeedX * 0.95;
                    puckX = puckX < puckRadius ? puckRadius : tableWidth - puckRadius;
                    createParticles(puckX, puckY, 10);
                }
                
                if (puckY < puckRadius) {
                    // Player 1 scores
                    player1Score++;
                    score1.textContent = player1Score;
                    createParticles(tableWidth/2, 50, 30, '#00c3ff');
                    resetAfterScore();
                    return;
                }
                
                if (puckY > tableHeight - puckRadius) {
                    // Player 2 scores
                    player2Score++;
                    score2.textContent = player2Score;
                    createParticles(tableWidth/2, tableHeight - 50, 30, '#ff8a00');
                    resetAfterScore();
                    return;
                }
                
                // Paddle collisions
                checkPaddleCollision(player1X, player1Y, 1);
                checkPaddleCollision(player2X, player2Y, -1);
                
                // Apply friction
                puckSpeedX *= 0.99;
                puckSpeedY *= 0.99;
                
                // Update positions
                updatePositions();
                
                // Check for winner
                if (player1Score >= 7 || player2Score >= 7) {
                    endGame();
                    return;
                }
                
                // Continue loop
                requestAnimationFrame(gameLoop);
            }
            
            // Move AI paddle
            function moveAI() {
                // Simple AI that follows the puck with some delay
                const targetX = puckX + (Math.random() * 80 - 40);
                const targetY = puckY * 0.3; // Stay in the top area
                
                // Move towards puck
                const dx = targetX - player2X;
                const dy = targetY - player2Y;
                const distance = Math.sqrt(dx*dx + dy*dy);
                
                if (distance > 5) {
                    player2X += dx * 0.05;
                    player2Y += dy * 0.05;
                }
                
                // Boundary check for AI
                player2X = Math.max(paddleRadius, Math.min(tableWidth - paddleRadius, player2X));
                player2Y = Math.max(paddleRadius, Math.min(tableHeight/2 - paddleRadius, player2Y));
            }
            
            // Check collision with a paddle
            function checkPaddleCollision(paddleX, paddleY, direction) {
                const dx = puckX - paddleX;
                const dy = puckY - paddleY;
                const distance = Math.sqrt(dx*dx + dy*dy);
                
                if (distance < puckRadius + paddleRadius) {
                    // Collision detected
                    const angle = Math.atan2(dy, dx);
                    
                    // Calculate new velocity based on collision angle
                    const speed = Math.sqrt(puckSpeedX*puckSpeedX + puckSpeedY*puckSpeedY);
                    const newSpeed = Math.min(10, speed * 1.1); // Speed up slightly
                    
                    puckSpeedX = Math.cos(angle) * newSpeed;
                    puckSpeedY = Math.sin(angle) * newSpeed * direction;
                    
                    // Add some randomness
                    puckSpeedX += (Math.random() - 0.5) * 2;
                    
                    // Move puck outside paddle to prevent sticking
                    puckX = paddleX + Math.cos(angle) * (puckRadius + paddleRadius + 1);
                    puckY = paddleY + Math.sin(angle) * (puckRadius + paddleRadius + 1);
                    
                    createParticles(puckX, puckY, 15);
                }
            }
            
            // Update element positions
            function updatePositions() {
                puck.style.left = `${puckX - puckRadius}px`;
                puck.style.top = `${puckY - puckRadius}px`;
                
                player1.style.left = `${player1X - paddleRadius}px`;
                player1.style.top = `${player1Y - paddleRadius}px`;
                
                player2.style.left = `${player2X - paddleRadius}px`;
                player2.style.top = `${player2Y - paddleRadius}px`;
            }
            
            // Reset after a goal
            function resetAfterScore() {
                gameActive = false;
                startBtn.textContent = 'CONTINUE';
                startBtn.style.background = 'linear-gradient(to right, #00c3ff, #0077ff)';
                
                setTimeout(() => {
                    resetPositions();
                }, 1500);
            }
            
            // End game when someone wins
            function endGame() {
                gameActive = false;
                startBtn.textContent = 'PLAY AGAIN';
                startBtn.style.background = 'linear-gradient(to right, #ff8a00, #ff2a00)';
                
                const winner = player1Score >= 7 ? 'PLAYER 1' : 'PLAYER 2';
                createParticles(tableWidth/2, tableHeight/2, 50, '#ffffff');
                
                setTimeout(() => {
                    alert(`${winner} WINS THE GAME!`);
                }, 500);
            }
            
            // Create particle effects
            function createParticles(x, y, count, color = '#ffffff') {
                for (let i = 0; i < count; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = `${x}px`;
                    particle.style.top = `${y}px`;
                    particle.style.width = `${Math.random() * 8 + 2}px`;
                    particle.style.height = particle.style.width;
                    particle.style.backgroundColor = color;
                    particle.style.opacity = Math.random() * 0.8 + 0.2;
                    
                    document.querySelector('.table-surface').appendChild(particle);
                    
                    // Animate particle
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 3 + 1;
                    const sizeDecay = Math.random() * 0.02 + 0.01;
                    
                    const animate = () => {
                        const left = parseFloat(particle.style.left);
                        const top = parseFloat(particle.style.top);
                        const size = parseFloat(particle.style.width);
                        
                        particle.style.left = `${left + Math.cos(angle) * speed}px`;
                        particle.style.top = `${top + Math.sin(angle) * speed}px`;
                        particle.style.width = `${size - sizeDecay}px`;
                        particle.style.height = particle.style.width;
                        particle.style.opacity = parseFloat(particle.style.opacity) - 0.01;
                        
                        if (parseFloat(particle.style.opacity) > 0) {
                            requestAnimationFrame(animate);
                        } else {
                            particle.remove();
                        }
                    };
                    
                    animate();
                }
            }
        });
    </script>
</body>
</html>